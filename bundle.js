// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Presentation=t()}(this,(function(){"use strict";function e(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return n.exec(e).slice(1)};function i(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var i=r>=0?arguments[r]:"/";if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,n="/"===i.charAt(0))}return(n?"/":"")+(e=t(h(e.split("/"),(function(e){return!!e})),!n).join("/"))||"."}function o(e){var n=s(e),r="/"===d(e,-1);return(e=t(h(e.split("/"),(function(e){return!!e})),!n).join("/"))||n||(e="."),e&&r&&(e+="/"),(n?"/":"")+e}function s(e){return"/"===e.charAt(0)}function a(){var e=Array.prototype.slice.call(arguments,0);return o(h(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function u(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=i(e).substr(1),t=i(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),s=Math.min(r.length,o.length),a=s,u=0;u<s;u++)if(r[u]!==o[u]){a=u;break}var l=[];for(u=a;u<r.length;u++)l.push("..");return(l=l.concat(o.slice(a))).join("/")}function l(e){var t=r(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."}function c(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function p(e){return r(e)[3]}var f={extname:p,basename:c,dirname:l,sep:"/",delimiter:":",relative:u,join:a,isAbsolute:s,normalize:o,resolve:i};function h(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var d="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},m=e(Object.freeze({__proto__:null,resolve:i,normalize:o,isAbsolute:s,join:a,relative:u,sep:"/",delimiter:":",dirname:l,basename:c,extname:p,default:f})),v=e(Object.freeze({__proto__:null,default:{}}));function g(){}function w(){w.init.call(this)}function _(e){return void 0===e._maxListeners?w.defaultMaxListeners:e._maxListeners}function b(e,t,n){if(t)e.call(n);else for(var r=e.length,i=L(e,r),o=0;o<r;++o)i[o].call(n)}function y(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=L(e,i),s=0;s<i;++s)o[s].call(n,r)}function E(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=L(e,o),a=0;a<o;++a)s[a].call(n,r,i)}function x(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,a=L(e,s),u=0;u<s;++u)a[u].call(n,r,i,o)}function S(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=L(e,i),s=0;s<i;++s)o[s].apply(n,r)}function j(e,t,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=new g,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=_(e))&&i>0&&s.length>i){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=n,++e._eventsCount;return e}function T(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function P(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function L(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}g.prototype=Object.create(null),w.EventEmitter=w,w.usingDomains=!1,w.prototype.domain=void 0,w.prototype._events=void 0,w.prototype._maxListeners=void 0,w.defaultMaxListeners=10,w.init=function(){this.domain=null,w.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new g,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},w.prototype.getMaxListeners=function(){return _(this)},w.prototype.emit=function(e){var t,n,r,i,o,s,a,u="error"===e;if(s=this._events)u=u&&null==s.error;else if(!u)return!1;if(a=this.domain,u){if(t=arguments[1],!a){if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(n=s[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:b(n,c,this);break;case 2:y(n,c,this,arguments[1]);break;case 3:E(n,c,this,arguments[1],arguments[2]);break;case 4:x(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];S(n,c,this,i)}return!0},w.prototype.addListener=function(e,t){return j(this,e,t,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(e,t){return j(this,e,t,!0)},w.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,T(this,e,t)),this},w.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,T(this,e,t)),this},w.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new g:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new g,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,s||t)}return this},w.prototype.off=function(e,t){return this.removeListener(e,t)},w.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new g,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new g:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new g,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},w.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},w.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):P.call(e,t)},w.prototype.listenerCount=P,w.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var A=e(Object.freeze({__proto__:null,default:w,EventEmitter:w})),O="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function R(){throw new Error("setTimeout has not been defined")}function C(){throw new Error("clearTimeout has not been defined")}var k=R,N=C;function M(e){if(k===setTimeout)return setTimeout(e,0);if((k===R||!k)&&setTimeout)return k=setTimeout,setTimeout(e,0);try{return k(e,0)}catch(t){try{return k.call(null,e,0)}catch(t){return k.call(this,e,0)}}}"function"==typeof O.setTimeout&&(k=setTimeout),"function"==typeof O.clearTimeout&&(N=clearTimeout);var B,F=[],J=!1,V=-1;function D(){J&&B&&(J=!1,B.length?F=B.concat(F):V=-1,F.length&&G())}function G(){if(!J){var e=M(D);J=!0;for(var t=F.length;t;){for(B=F,F=[];++V<t;)B&&B[V].run();V=-1,t=F.length}B=null,J=!1,function(e){if(N===clearTimeout)return clearTimeout(e);if((N===C||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(e);try{N(e)}catch(t){try{return N.call(null,e)}catch(t){return N.call(this,e)}}}(e)}}function I(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];F.push(new U(e,t)),1!==F.length||J||M(G)}function U(e,t){this.fun=e,this.array=t}U.prototype.run=function(){this.fun.apply(null,this.array)};var W="browser",Y="browser",z={},q=[],K={},$={},H={};function X(){}var Q=X,Z=X,ee=X,te=X,ne=X,re=X,ie=X;function oe(e){throw new Error("process.binding is not supported")}function se(){return"/"}function ae(e){throw new Error("process.chdir is not supported")}function ue(){return 0}var le=O.performance||{},ce=le.now||le.mozNow||le.msNow||le.oNow||le.webkitNow||function(){return(new Date).getTime()};function pe(e){var t=.001*ce.call(le),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var fe=new Date;function he(){return(new Date-fe)/1e3}var de={nextTick:I,title:W,browser:true,env:z,argv:q,version:"",versions:K,on:Q,addListener:Z,once:ee,off:te,removeListener:ne,removeAllListeners:re,emit:ie,binding:oe,cwd:se,chdir:ae,umask:ue,hrtime:pe,platform:Y,release:$,config:H,uptime:he},me=Object.freeze({__proto__:null,addListener:Z,argv:q,binding:oe,browser:true,chdir:ae,config:H,cwd:se,default:de,emit:ie,env:z,hrtime:pe,nextTick:I,off:te,on:Q,once:ee,platform:Y,release:$,removeAllListeners:re,removeListener:ne,title:W,umask:ue,uptime:he,version:"",versions:K});module.exports=void 0!==de&&"renderer"===de.type?require("./browser.js"):require("./node.js");var ve=e(Object.freeze({__proto__:null})),ge=/./,we="function"==typeof Object.defineProperty?Object.defineProperty:null;var _e=function(){try{return we({},"x",{}),!0}catch(e){return!1}},be=Object.defineProperty,ye=Object.prototype,Ee=ye.toString,xe=ye.__defineGetter__,Se=ye.__defineSetter__,je=ye.__lookupGetter__,Te=ye.__lookupSetter__;var Pe=function(e,t,n){var r,i,o,s;if("object"!=typeof e||null===e||"[object Array]"===Ee.call(e))throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if("object"!=typeof n||null===n||"[object Array]"===Ee.call(n))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+n+"`.");if((i="value"in n)&&(je.call(e,t)||Te.call(e,t)?(r=e.__proto__,e.__proto__=ye,delete e[t],e[t]=n.value,e.__proto__=r):e[t]=n.value),o="get"in n,s="set"in n,i&&(o||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&xe&&xe.call(e,t,n.get),s&&Se&&Se.call(e,t,n.set),e},Le=be,Ae=Pe,Oe=_e()?Le:Ae,Re=Oe;var Ce=function(e,t,n){Re(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})},ke=Ce;var Ne=function(e){return"boolean"==typeof e};var Me=function(){return"function"==typeof Symbol&&"symbol"==typeof Symbol("foo")}();var Be=function(){return Me&&"symbol"==typeof Symbol.toStringTag},Fe=Object.prototype.toString,Je=Fe;var Ve=function(e){return Je.call(e)},De=Object.prototype.hasOwnProperty;var Ge=function(e,t){return null!=e&&De.call(e,t)},Ie="function"==typeof Symbol?Symbol.toStringTag:"",Ue=Ge,We=Ie,Ye=Fe;var ze=Ve,qe=function(e){var t,n,r;if(null==e)return Ye.call(e);n=e[We],t=Ue(e,We);try{e[We]=void 0}catch(t){return Ye.call(e)}return r=Ye.call(e),t?e[We]=n:delete e[We],r},Ke=Be()?qe:ze,$e=Boolean.prototype.toString;var He=Ke,Xe=function(e){try{return $e.call(e),!0}catch(e){return!1}},Qe=Be();var Ze=function(e){return"object"==typeof e&&(e instanceof Boolean||(Qe?Xe(e):"[object Boolean]"===He(e)))},et=Ne,tt=Ze;var nt=ke,rt=function(e){return et(e)||tt(e)},it=Ze;nt(rt,"isPrimitive",Ne),nt(rt,"isObject",it);var ot=rt;var st=function(){return new Function("return this;")()},at="object"==typeof self?self:null,ut="object"==typeof window?window:null,lt="object"==typeof O?O:null;module.exports=lt;var ct=ot.isPrimitive,pt=st,ft=at,ht=ut,dt=e(Object.freeze({__proto__:null}));var mt=function(e){if(arguments.length){if(!ct(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return pt()}if(ft)return ft;if(ht)return ht;if(dt)return dt;throw new Error("unexpected error. Unable to resolve global object.")},vt=mt(),gt=vt.document&&vt.document.childNodes,wt=Int8Array,_t=ge,bt=gt,yt=wt;var Et=function(){return"function"==typeof _t||"object"==typeof yt||"function"==typeof bt};var xt=function(){return/^\s*function\s*([^(]*)/i},St=xt;ke(St,"REGEXP",xt());var jt=St,Tt=Ke;var Pt=Array.isArray?Array.isArray:function(e){return"[object Array]"===Tt(e)},Lt=Pt;var At=function(e){return null!==e&&"object"==typeof e};ke(At,"isObjectLikeArray",function(e){if("function"!=typeof e)throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return function(t){var n,r;if(!Lt(t))return!1;if(0===(n=t.length))return!1;for(r=0;r<n;r++)if(!1===e(t[r]))return!1;return!0}}(At));var Ot=At;var Rt=Ke,Ct=jt.REGEXP,kt=function(e){return Ot(e)&&(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))};var Nt=function(e){var t,n,r;if(("Object"===(n=Rt(e).slice(8,-1))||"Error"===n)&&e.constructor){if("string"==typeof(r=e.constructor).name)return r.name;if(t=Ct.exec(r.toString()))return t[1]}return kt(e)?"Buffer":n},Mt=Nt;var Bt=Nt;var Ft=function(e){var t;return null===e?"null":"object"===(t=typeof e)?Mt(e).toLowerCase():t},Jt=function(e){return Bt(e).toLowerCase()},Vt=Et()?Jt:Ft;var Dt=function(e){return"function"===Vt(e)};var Gt=function(e){return"string"==typeof e},It=String.prototype.valueOf;var Ut=Ke,Wt=function(e){try{return It.call(e),!0}catch(e){return!1}},Yt=Be();var zt=function(e){return"object"==typeof e&&(e instanceof String||(Yt?Wt(e):"[object String]"===Ut(e)))},qt=Gt,Kt=zt;var $t=ke,Ht=function(e){return qt(e)||Kt(e)},Xt=zt;$t(Ht,"isPrimitive",Gt),$t(Ht,"isObject",Xt);var Qt=Ht;var Zt=function(e){return"number"==typeof e},en=Number,tn=en.prototype.toString;var nn=Ke,rn=en,on=function(e){try{return tn.call(e),!0}catch(e){return!1}},sn=Be();var an=function(e){return"object"==typeof e&&(e instanceof rn||(sn?on(e):"[object Number]"===nn(e)))},un=Zt,ln=an;var cn=ke,pn=function(e){return un(e)||ln(e)},fn=an;cn(pn,"isPrimitive",Zt),cn(pn,"isObject",fn);var hn=pn,dn=Number.POSITIVE_INFINITY,mn=en.NEGATIVE_INFINITY,vn=Math.floor,gn=vn;var wn=dn,_n=mn,bn=function(e){return gn(e)===e};var yn=function(e){return e<wn&&e>_n&&bn(e)},En=hn.isPrimitive,xn=yn;var Sn=function(e){return En(e)&&xn(e)},jn=hn.isObject,Tn=yn;var Pn=function(e){return jn(e)&&Tn(e.valueOf())},Ln=Sn,An=Pn;var On=ke,Rn=function(e){return Ln(e)||An(e)},Cn=Pn;On(Rn,"isPrimitive",Sn),On(Rn,"isObject",Cn);var kn=Rn,Nn=Oe;var Mn=function(e,t,n){Nn(e,t,{configurable:!1,enumerable:!1,get:n})},Bn=Mn,Fn=Oe;var Jn=function(e,t,n){Fn(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})},Vn=Jn;var Dn=function(e){return e!=e},Gn=mn;var In=Dn,Un=function(e){return 0===e&&1/e===Gn};var Wn=function(e,t,n){return In(e)||In(t)||In(n)?NaN:e<t?t:e>n?n:0===t&&Un(e)?t:0===e&&Un(n)?n:e},Yn=Wn,zn=Math.ceil,qn=vn,Kn=zn;var $n=Dn,Hn=function(e){return e<0?Kn(e):qn(e)};var Xn=function(e,t,n){var r;return $n(e)||$n(t)||$n(n)||n<=t?NaN:(0===e&&(e=0),0===t&&(t=0),0===n&&(n=0),t<=e&&e<n?e:(r=n-t,e<t&&(e+=r*(Hn((t-e)/r)+1)),t+(e-t)%r))},Qn=Xn,Zn=v.readFile;var er=function(){var e,t;for(e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);Zn.apply(null,e)},tr=v.readFileSync;var nr=function(e,t){var n;try{n=arguments.length>1?tr(e,t):tr(e)}catch(e){return e}return n},rr=er;ke(rr,"sync",nr);var ir=rr,or=kn.isPrimitive;var sr=function(e){return or(e)&&e>=0},ar=kn.isObject;var ur=function(e){return ar(e)&&e.valueOf()>=0},lr=sr,cr=ur;var pr=ke,fr=function(e){return lr(e)||cr(e)},hr=ur;pr(fr,"isPrimitive",sr),pr(fr,"isObject",hr);var dr=fr.isPrimitive,mr=Qt.isPrimitive;var vr=function(e,t){var n,r;if(!mr(e))throw new TypeError("invalid argument. First argument must be a string. Value: `"+e+"`.");if(!dr(t))throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(0===e.length||0===t)return"";if(e.length*t>9007199254740991)throw new RangeError("invalid argument. Output string length exceeds maximum allowed string length.");for(n="",r=t;1==(1&r)&&(n+=e),0!==(r>>>=1);)e+=e;return n},gr=e(me),wr=gr;var _r=function(){return wr.cwd()};var br=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t?new TypeError("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `"+e+"`."):null},yr=Object.create;function Er(){}var xr=function(e){return Er.prototype=e,new Er},Sr=Oe,jr=br,Tr="function"==typeof yr?yr:xr;var Pr=function(e,t){var n=jr(e);if(n)throw n;if(n=jr(t))throw n;if(void 0===t.prototype)throw new TypeError("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `"+t.prototype+"`.");return e.prototype=Tr(t.prototype),Sr(e.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:e}),e},Lr=gr;var Ar=function(e){var t,n;for(t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);function r(){e.apply(null,t)}Lr.nextTick(r)},Or=Ar;var Rr=function(){return{borderTop:"*",borderBottom:"*",borderLeft:"* ",borderRight:" *",newline:"\n",whitespace:" ",width:null,height:null,counter:!1,workspace:"presentation",autoClear:!0,loop:!1}},Cr=Pt;var kr=function(e){return"object"==typeof e&&null!==e&&!Cr(e)},Nr=Object.getPrototypeOf;var Mr=function(e){return e.__proto__},Br=Ke,Fr=Mr;var Jr=function(e){var t=Fr(e);return t||null===t?t:"[object Function]"===Br(e.constructor)?e.constructor.prototype:e instanceof Object?Object.prototype:null},Vr=Nr,Dr=Jr,Gr=Dt(Object.getPrototypeOf)?Vr:Dr;var Ir=kr,Ur=Dt,Wr=function(e){return null==e?null:(e=Object(e),Gr(e))},Yr=Ge,zr=Ke,qr=Object.prototype;var Kr=function(e){var t;return!!Ir(e)&&(!(t=Wr(e))||!Yr(e,"constructor")&&Yr(t,"constructor")&&Ur(t.constructor)&&"[object Function]"===zr(t.constructor)&&Yr(t,"isPrototypeOf")&&Ur(t.isPrototypeOf)&&(t===qr||function(e){var t;for(t in e)if(!Yr(e,t))return!1;return!0}(e)))},$r=Kr,Hr=kn.isPrimitive;var Xr=function(e){return Hr(e)&&e>0},Qr=kn.isObject;var Zr=function(e){return Qr(e)&&e.valueOf()>0},ei=Xr,ti=Zr;var ni=ke,ri=function(e){return ei(e)||ti(e)},ii=Zr;ni(ri,"isPrimitive",Xr),ni(ri,"isObject",ii);var oi=ri,si=$r,ai=Ge,ui=Qt.isPrimitive,li=ot.isPrimitive,ci=oi.isPrimitive;var pi=function(e,t){return si(t)?ai(t,"borderTop")&&(e.borderTop=t.borderTop,!ui(t.borderTop))?new TypeError("invalid option. `borderTop` option must be a string. Option: `"+t.borderTop+"`."):ai(t,"borderBottom")&&(e.borderBottom=t.borderBottom,!ui(t.borderBottom))?new TypeError("invalid option. `borderBottom` option must be a string. Option: `"+t.borderBottom+"`."):ai(t,"borderLeft")&&(e.borderLeft=t.borderLeft,!ui(t.borderLeft))?new TypeError("invalid option. `borderLeft` option must be a string. Option: `"+t.borderLeft+"`."):ai(t,"borderRight")&&(e.borderRight=t.borderRight,!ui(t.borderRight))?new TypeError("invalid option. `borderRight` option must be a string. Option: `"+t.borderRight+"`."):ai(t,"counter")&&(e.counter=t.counter,"progress"!==t.counter&&!li(t.counter))?new TypeError("invalid option. `counter` option must be either a recognized string or boolean. Option: `"+t.counter+"`."):ai(t,"width")&&(e.width=t.width,null!==t.width&&!ci(t.width))?new TypeError("invalid option. `width` option must be either a positive integer or null. Option: `"+t.width+"`."):ai(t,"height")&&(e.height=t.height,null!==t.height&&!ci(t.height))?new TypeError("invalid option. `height` option must be either a positive integer or null. Option: `"+t.height+"`."):ai(t,"workspace")&&(e.workspace=t.workspace,!ui(t.workspace))?new TypeError("invalid option. `workspace` option must be a string. Option: `"+t.workspace+"`."):ai(t,"load")&&(e.load=t.load,!ui(t.load))?new TypeError("invalid option. `load` option must be a string. Option: `"+t.load+"`."):ai(t,"autoClear")&&(e.autoClear=t.autoClear,!li(t.autoClear))?new TypeError("invalid option. `autoClear` option must be a boolean. Option: `"+t.autoClear+"`."):ai(t,"loop")&&(e.loop=t.loop,!li(t.loop))?new TypeError("invalid option. `loop` option must be a boolean. Option: `"+t.loop+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")},fi=$r,hi=Ge,di=ot.isPrimitive,mi=Qt.isPrimitive;var vi=function(e,t){return fi(t)?hi(t,"flags")&&(e.flags=t.flags,!mi(e.flags))?new TypeError("invalid option. `flags` option must be a string primitive. Option: `"+e.flags+"`."):hi(t,"capture")&&(e.capture=t.capture,!di(e.capture))?new TypeError("invalid option. `capture` option must be a boolean primitive. Option: `"+e.capture+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")},gi=vi,wi="\\r?\\n";var _i=function(e){var t,n;if(arguments.length>0){if(n=gi(t={},e))throw n;return t.capture?new RegExp("(\\r?\\n)",t.flags):new RegExp(wi,t.flags)}return/\r?\n/},bi=ke,yi=_i,Ei=_i({capture:!0});bi(yi,"REGEXP",_i()),bi(yi,"REGEXP_CAPTURE",Ei);var xi=yi,Si=Qt.isPrimitive,ji=/[-\/\\^$*+?.()|[\]{}]/g;var Ti=function(e){var t,n;if(!Si(e))throw new TypeError("invalid argument. Must provide a regular expression string. Value: `"+e+"`.");if("/"===e[0])for(n=e.length-1;n>=0&&"/"!==e[n];n--);return void 0===n||n<=0?e.replace(ji,"\\$&"):(t=(t=e.substring(1,n)).replace(ji,"\\$&"),e=e[0]+t+e.substring(n))},Pi=RegExp.prototype.exec;var Li=Ke,Ai=function(e){try{return Pi.call(e),!0}catch(e){return!1}},Oi=Be();var Ri=Ti,Ci=Dt,ki=Qt.isPrimitive,Ni=function(e){return"object"==typeof e&&(e instanceof RegExp||(Oi?Ai(e):"[object RegExp]"===Li(e)))};var Mi=function(e,t,n){if(!ki(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");if(ki(t))t=Ri(t),t=new RegExp(t,"g");else if(!Ni(t))throw new TypeError("invalid argument. Second argument must be a string primitive or regular expression. Value: `"+t+"`.");if(!ki(n)&&!Ci(n))throw new TypeError("invalid argument. Third argument must be a string primitive or replacement function. Value: `"+n+"`.");return e.replace(t,n)},Bi=Qt.isPrimitive,Fi=Mi,Ji=/^[\u0020\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*([\S\s]*?)[\u0020\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*$/;var Vi=function(e){if(!Bi(e))throw new TypeError("invalid argument. Must provide a string primitive. Value: `"+e+"`.");return Fi(e,Ji,"$1")},Di=dn;var Gi=function(e){return 0===e&&1/e===Di},Ii=Dn,Ui=mn,Wi=dn;var Yi=function(e,t){var n,r,i,o;if(2===(n=arguments.length))return Ii(e)||Ii(t)?NaN:e===Wi||t===Wi?Wi:e===t&&0===e?Gi(e)?e:t:e>t?e:t;for(r=Ui,o=0;o<n;o++){if(Ii(i=arguments[o])||i===Wi)return i;(i>r||i===r&&0===i&&Gi(i))&&(r=i)}return r},zi=Yi,qi=Ge,Ki={BLACK:"[30m",BLACK_B:"[40m",BLUE:"[34m",BLUE_B:"[44m",BOLD:"[1m",CYAN:"[36m",CYAN_B:"[46m",GREEN:"[32m",GREEN_B:"[42m",MAGENTA:"[35m",MAGENTA_B:"[45m",RED:"[31m",RED_B:"[41m",RESET:"[0m",REVERSED:"[7m",UNDERLINED:"[4m",WHITE:"[37m",WHITE_B:"[47m",YELLOW:"[33m",YELLOW_B:"[43m"};var $i=function(e){return qi(Ki,e)?Ki[e]:null},Hi=Ge,Xi=$i,Qi={b:"BLUE",c:"CYAN",g:"GREEN",k:"BLACK",m:"MAGENTA",r:"RED",w:"WHITE",y:"YELLOW",B:"BLUE_B",C:"CYAN_B",G:"GREEN_B",K:"BLACK_B",M:"MAGENTA_B",R:"RED_B",W:"WHITE_B",Y:"YELLOW_B","!":"REVERSED","*":"BOLD",_:"UNDERLINED"};var Zi=function(e){return Hi(Qi,e)?Xi(Qi[e]):null},eo=Mi,to=Zi,no=$i("RESET");var ro=function(e){var t,n,r;return t=/(\\.)/g,r=0,n="",e.text=eo(e.text,t,(function(e,t){var i,o=t[1];if(i=to(o))return n=no,r-=2,i;if("s"===o)return r-=2,no;if("\\"===o)return r-=1,"\\\\";return"\\\\"+o})),e.text+=n,e.length+=r,e},io=require("path").resolve,oo=require("@stdlib/fs-read-json").sync,so=io("/home/runner/work/repl-presentation/repl-presentation/node_modules/@stdlib/datasets-emoji-code-picto/lib","..","data","data.json"),ao={encoding:"utf8"};module.exports=function(){var e=oo(so,ao);if(e instanceof Error)throw e;return e};var uo=Mi,lo=Ge,co=e(Object.freeze({__proto__:null}))();var po=xi.REGEXP,fo=Vi,ho=Ge,mo=zi,vo=ro,go=function(e){var t,n;return t=/:([\w+\-]+)(?::{2}([\w+\-,\s]+))?:/g,n=0,e.text=uo(e.text,t,(function(e,t,r){var i,o;i=":"+t+":",r&&(r=r.split(/,\s*/).join(", "),i+=":"+r+":");if(lo(co,i)&&2===(o=co[i]).length)return n-=e.length-2,o;return e})),e.length+=n,e},wo=/^(\s*)```\s*([a-z]+)?$/,_o={js:"javascript",javascript:"javascript"};var bo=function(e){var t,n,r,i,o,s,a,u,l,c,p;for(a={raw:e,fragments:[],code:[],notes:"",length:0,maxLength:0},(e=e.split("~~~")).length>1&&(a.notes+=fo(e.slice(1).join("~~~"))),i=(e=e[0]).split("--"),c=0;c<i.length;c++){for(r=fo(i[c]).split(po),u=0===c?[]:a.fragments[c-1].slice(),n=!1,p=0;p<r.length;p++)(l=(o=r[p]).match(wo))?!1===n?(n=!0,t=l[1],s=l[2]?ho(_o,l[2])?_o[l[2]]:"unknown":"javascript",a.code.push({lang:s,src:[]})):n=!1:(n&&(o=o.slice(t.length),a.code[a.code.length-1].src.push(o),o="    "+o),o={text:o,length:o.length},o=vo(o),o=go(o),u.push(o));a.fragments.push(u)}for(a.length=u.length,c=0;c<u.length;c++)a.maxLength=mo(a.maxLength,u[c].length);return a},yo=bo;var Eo=function(e,t){var n,r;for(n=t.split("---"),r=0;r<n.length;r++)e.push(yo(n[r]));return e},xo=kn.isPrimitive,So=Qt.isPrimitive;var jo=function(e,t,n){var r,i;if(!So(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");if(!So(t))throw new TypeError("invalid argument. Second argument must be a string primitive. Value: `"+t+"`.");if(arguments.length>2){if(!xo(n))throw new TypeError("invalid argument. Third argument must be an integer. Value: `"+n+"`.");r=n<0?e.length+n:n}else r=0;if(0===t.length)return!0;if(r<0||r+t.length>e.length)return!1;for(i=0;i<t.length;i++)if(e.charCodeAt(r+i)!==t.charCodeAt(i))return!1;return!0},To=jo;var Po=function(e,t,n,r){var i,o;for(i="",o=0;o<n;o++)i+=t;for(i+=e,o=0;o<r;o++)i+=t;return i},Lo=Po;var Ao=Po;var Oo=Po;var Ro=Po;var Co=Po;var ko=function(e,t,n,r){return Co(t,r,e-n,0)},No=To,Mo=function(e,t,n,r){var i=e-n,o=i/2|0;return Lo(t,r,o,i-o)},Bo=function(e,t,n,r,i){var o;return Ao(t,r,o=i/2|0,e-o-n)},Fo=function(e,t,n,r,i){var o;return Oo(t,r,e-(o=(i+1)/2|0)-n,o)},Jo=function(e,t,n,r){return Ro(t,r,0,e-n)},Vo=ko;var Do=function(e,t,n,r,i){return No(t,"<< ")?Jo(e,t.substring(3),n-3,r):No(t,">> ")?Vo(e,t.substring(3),n-3,r):No(t,"< ")?Bo(e,t.substring(2),n-2,r,i):No(t,"> ")?Fo(e,t.substring(2),n-2,r,i):No(t,"| ")?Mo(e,t.substring(2),n-2,r):Bo(e,t,n,r,i)},Go=vr,Io=Po,Uo=$i("RESET"),Wo=Uo[0],Yo=Uo[Uo.length-1],zo=/[\uD800-\uDBFF]/;var qo=To,Ko=Do,$o=function(e,t,n,r,i){var o,s,a,u,l,c,p,f,h;if(""===t&&(n=(t="-").length),o="",l=Go(t,f=(a=e-i)/n|0),(c=a-n*f)>0)for(h=0;h<t.length;h++)if((p=t[h])!==Yo)if(s)l+=p;else if(p!==Wo){if(zo.test(p)){if(c<=1){l+=r;break}l+=p,c-=1}else if(l+=p,0===(c-=1))break}else l+=p,s=!0,o+=Uo;else s&&(s=!1),l+=p;return Io(l+o,r,u=i/2|0,i-u)};var Ho=function(e,t,n,r){var i,o,s;for(t=t.slice(),s=0;s<t.length;s++)i=t[s].text,o=t[s].length,i=qo(i,"//")?$o(e,i.substring(2),o-2,n,0):qo(i,"/")?$o(e,i.substring(1),o-1,n,r):Ko(e,i,o,n,r),t[s]={text:i,length:e};return t},Xo=ko;var Qo=function(e,t,n,r,i){var o=r.toString();return"progress"===n&&(o+="/"+i),Xo(e,o+=" ",o.length,t)},Zo=vr;var es=function(e,t,n,r){return n+(0===r.length?"":Zo(t,e))+r},ts=vr;var ns=function(e){return function(){var t=ts(e._opts.newline,e.height+1);e._repl._ostream.write(t),e._repl.once("drain",(function(){e._repl._ostream.write("[1T[1G")}))}};var rs=function(e){return function(){return e.currentSlide}};var is=function(e){return function(){e._repl.once("drain",(function(){e.end().show()}))}};var os=function(e){return function(){e._repl.once("drain",(function(){e.first().show()}))}};var ss=function(e){return function(){e._repl.once("drain",(function(){e.firstFragment().show()}))}},as=kn.isPrimitive,us=ve("repl:presentation:command:jump");var ls=function(e){return function(t){var n;if(!as(t))return n=new TypeError("invalid argument. Must provide an integer. Value: `"+t+"`."),us("Error: %s",n.message),void e._repl._ostream.write("Error: "+n.message+"\n");e._repl.once("drain",(function(){e.jump(t).show()}))}},cs=oi.isPrimitive,ps=ve("repl:presentation:command:jump_to");var fs=function(e){return function(t){var n;if(!cs(t))return n=new TypeError("invalid argument. Must provide a positive integer. Value: `"+t+"`."),ps("Error: %s",n.message),void e._repl._ostream.write("Error: "+n.message+"\n");e._repl.once("drain",(function(){e.jumpTo(t).show()}))}};var hs=function(e){return function(){e._repl.once("drain",(function(){e.last().show()}))}};var ds=function(e){return function(){e._repl.once("drain",(function(){e.lastFragment().show()}))}},ms=Qt.isPrimitive,vs=ve("repl:presentation:command:load_presentation");var gs=function(e){return function(t){var n;if(!ms(t))return n=new TypeError("invalid argument. Must provide a string. Value: `"+t+"`."),vs("Error: %s",n.message),void e._repl._ostream.write("Error: "+n.message+"\n");e._repl.once("drain",(function(){var n;try{e.load(t).show()}catch(t){vs("Error: %s",t.message),n=e._repl._prompt().length,e._repl._ostream.write("[1A["+n+"DError: "+t.message+"[0J\n"),e._repl._displayPrompt()}}))}};var ws=function(e){return function(){e._repl.once("drain",(function(){e.next().show()}))}};var _s=function(e){return function(){e._repl.once("drain",(function(){e.nextSlide().show()}))}};var bs=function(e){return function(){return e.length}},ys=["","    pres()                h()    Print presentation help text.","","    next()                n()    Move to the next slide or slide fragment.","    nextSlide()           N()    Move to the next slide.","    prev()                p()    Move to the previous slide or slide fragment.","    prevSlide()           P()    Move to the previous slide.","","    jump()                g()    Jump a specified number of slides.","    jumpTo()              j()    Jump to a specified slide.","    first()               f()    Jump to the first slide.","    last()                l()    Jump to the first fragment of the last slide.","    end()                 L()    Jump to the last fragment of the last slide.","","    firstFragment()       ff()   Jump to the first slide fragment.","    lastFragment()        lf()   Jump to the last slide fragment.","","    blank()               b()    Render a blank screen.","    redraw()              rd()   Redraw the current slide.","","    runSlide()            r()    Run slide code.","","    watch()               w()    Watch a presentation file for changes.","    unwatch()             uw()   Stop watching a presentation file for changes.","","    loadPresentation()    lp()   Load a presentation.","    reloadPresentation()  rlp()  Reload the current presentation.","    renderSlide()                Render the current slide.","","    currentSlide                 Current slide index.","    numSlides                    Number of slides.","",""].join("\n");var Es=function(e){return function(){e._repl._ostream.write(ys)}};var xs=function(e){return function(){e._repl.once("drain",(function(){e.prev().show()}))}};var Ss=function(e){return function(){e._repl.once("drain",(function(){e.prevSlide().show()}))}};var js=function(e){return function(){e._repl.once("drain",(function(){e.show()}))}},Ts=ve("repl:presentation:command:reload_presentation");var Ps=function(e){return function(){e._repl.once("drain",(function(){var t;try{e.reload().show()}catch(n){Ts("Error: %s",n.message),t=e._repl._prompt().length,e._repl._ostream.write("[1A["+t+"DError: "+n.message+"[0J\n"),e._repl._displayPrompt()}}))}};var Ls=function(e){return function(){return e.render()}};var As=function(){};var Os=function(e){return function(){e._repl.once("drain",(function(){e.run(As)}))}};var Rs=function(e){return function(t){if(arguments.length)return void e.unwatch(t);e.unwatch()}};var Cs=function(e){return function(){e.watch()}},ks=ns,Ns=rs,Ms=is,Bs=os,Fs=ss,Js=ls,Vs=fs,Ds=hs,Gs=ds,Is=gs,Us=ws,Ws=_s,Ys=bs,zs=Es,qs=xs,Ks=Ss,$s=js,Hs=Ps,Xs=Ls,Qs=Os,Zs=Rs,ea=Cs;var ta=function(e){var t;return(t=[]).push(["blank","b",ks(e),!1]),t.push(["currentSlide","",Ns(e),!0]),t.push(["end","L",Ms(e),!1]),t.push(["first","f",Bs(e),!1]),t.push(["firstFragment","ff",Fs(e),!1]),t.push(["jump","g",Js(e),!1]),t.push(["jumpTo","j",Vs(e),!1]),t.push(["last","l",Ds(e),!1]),t.push(["lastFragment","lf",Gs(e),!1]),t.push(["loadPresentation","lp",Is(e),!1]),t.push(["next","n",Us(e),!1]),t.push(["nextSlide","N",Ws(e),!1]),t.push(["numSlides","",Ys(e),!0]),t.push(["pres","h",zs(e),!1]),t.push(["prev","p",qs(e),!1]),t.push(["prevSlide","P",Ks(e),!1]),t.push(["redraw","rd",$s(e),!1]),t.push(["reloadPresentation","rlp",Hs(e),!1]),t.push(["renderSlide","",Xs(e),!1]),t.push(["runSlide","r",Qs(e),!1]),t.push(["unwatch","uw",Zs(e),!1]),t.push(["watch","w",ea(e),!1]),t},na=Oe;var ra=function(e,t,n){na(e,t,{configurable:!0,enumerable:!0,writable:!1,value:n})},ia=Oe;var oa=function(e,t,n){ia(e,t,{configurable:!0,enumerable:!0,get:n})},sa=Ge,aa=ra,ua=oa,la=ve("repl:presentation:set_commands");var ca=function(e,t){var n,r;for(r=0;r<t.length;r++)n=t[r],sa(e,n[0])?la("Skipping command as global context property `"+n[0]+"` is already assigned."):n[3]?ua(e,n[0],n[2]):aa(e,n[0],n[2]),n[1]&&(sa(e,n[1])?la("Skipping command shortcut as global context property `"+n[1]+"` is already assigned."):n[3]?ua(e,n[1],n[2]):aa(e,n[1],n[2]));return e},pa={help:{blank:"\nblank()\n    Renders a blank screen.\n\n    Examples\n    --------\n    > blank();\n\n    See Also\n    --------\n    next, nextSlide, prev, prevSlide, redraw\n\n",currentSlide:"\ncurrentSlide\n    Returns the current presentation slide index.\n\n    The returned index is the nominal (i.e., one-based) slide index.\n\n    Returns\n    -------\n    idx: integer\n        Current presentation slide index.\n\n    Examples\n    --------\n    > currentSlide\n\n    See Also\n    --------\n    jumpTo, next, numSlides, prev\n\n",end:"\nend()\n    Jumps to the last fragment of the last slide.\n\n    Examples\n    --------\n    > end();\n\n    See Also\n    --------\n    first, jumpTo, last, next, prev\n\n",first:"\nfirst()\n    Jumps to the first slide.\n\n    Examples\n    --------\n    > first();\n\n    See Also\n    --------\n    end, jumpTo, last, next, prev\n\n",firstFragment:"\nfirstFragment()\n    Jumps to the first fragment of the current slide.\n\n    Examples\n    --------\n    > firstFragment();\n\n    See Also\n    --------\n    lastFragment, next, prev\n\n",jump:"\njump( n )\n    Jumps a specified number of slides.\n\n    Parameters\n    ----------\n    n: integer\n    \tNumber of slides to jump.\n\n    Examples\n    --------\n    // Jump two slides forward:\n    > jump( 2 );\n\n    // Jump two slides backward:\n    > jump( -2 );\n\n    See Also\n    --------\n    jumpTo, next, prev\n\n",jumpTo:"\njumpTo( n )\n    Jumps to a specified slide, where `n` is the nominal slide number.\n\n    Parameters\n    ----------\n    n: integer\n    \tNominal slide number (one-based).\n\n    Examples\n    --------\n    > jumpTo( 2 );\n\n    See Also\n    --------\n    jump, next, prev\n\n",last:"\nlast()\n    Jumps to the last slide.\n\n    Examples\n    --------\n    > last();\n\n    See Also\n    --------\n    end, first, jumpTo, next, prev\n\n",lastFragment:"\nlastFragment()\n    Jumps to the last fragment of the current slide.\n\n    Examples\n    --------\n    > lastFragment();\n\n    See Also\n    --------\n    firstFragment, next, prev\n\n",loadPresentation:"\nloadPresentation( file )\n    Loads a presentation from a file.\n\n    Relative file paths are resolved relative to the current working directory.\n\n    Parameters\n    ----------\n    file: string\n    \tFile path.\n\n    Examples\n    --------\n    > loadPresentation( './path/to/presentation.txt' );\n\n    See Also\n    --------\n    reloadPresentation\n\n",next:"\nnext()\n    Moves the presentation to the next slide or slide fragment.\n\n    Examples\n    --------\n    > next();\n\n    See Also\n    --------\n    first, jumpTo, last, nextSlide, prev\n\n",nextSlide:"\nnextSlide()\n    Moves the presentation to the next slide.\n\n    Examples\n    --------\n    > nextSlide();\n\n    See Also\n    --------\n    first, jumpTo, last, next, prev, prevSlide\n\n",numSlides:"\nnumSlides\n    Returns the presentation length.\n\n    Returns\n    -------\n    len: integer\n        Number of slides.\n\n    Examples\n    --------\n    > numSlides\n\n    See Also\n    --------\n    currentSlide, jumpTo, next, prev\n\n",pres:"\npres()\n    Prints presentation help text and shortcuts.\n\n    Examples\n    --------\n    > pres();\n\n    See Also\n    --------\n    help, info\n\n",prev:"\nprev()\n    Moves the presentation to the previous slide or slide fragment.\n\n    Examples\n    --------\n    > prev();\n\n    See Also\n    --------\n    first, jumpTo, last, next, prevSlide\n\n",prevSlide:"\nprevSlide()\n    Moves the presentation to the previous slide.\n\n    Examples\n    --------\n    > prevSlide();\n\n    See Also\n    --------\n    first, jumpTo, last, next, nextSlide, prev\n\n",redraw:"\nredraw()\n    Redraws the current presentation slide.\n\n    Examples\n    --------\n    > redraw();\n\n    See Also\n    --------\n    next, nextSlide, prev, prevSlide, reloadPresentation\n\n",reloadPresentation:"\nreloadPresentation( file )\n    Reloads a presentation.\n\n    Examples\n    --------\n    > reloadPresentation();\n\n    See Also\n    --------\n    loadPresentation, redraw\n\n",renderSlide:"\nrenderSlide()\n    Renders the current presentation slide.\n\n    Examples\n    --------\n    > renderSlide()\n\n    See Also\n    --------\n    load\n\n",runSlide:"\nrunSlide()\n    Runs slide code.\n\n    Examples\n    --------\n    > runSlide()\n\n    See Also\n    --------\n    next, prev\n\n",unwatch:"\nunwatch( [error] )\n    Stops watching a presentation file for changes.\n\n    Parameters\n    ----------\n    error: Error (optional)\n    \tError object.\n\n    Examples\n    --------\n    > unwatch();\n\n    See Also\n    --------\n    loadPresentation, redraw, reloadPresentation, watch\n\n",watch:'\nwatch()\n    Watches a presentation source file for changes.\n\n    "Renaming" a source file is *not* tracked. If a source presentation file is\n    renamed, watching stops.\n\n    Examples\n    --------\n    > watch();\n\n    See Also\n    --------\n    loadPresentation, redraw, reloadPresentation, unwatch\n\n'},info:{blank:"\nblank()\n    Renders a blank screen.\n",currentSlide:"\ncurrentSlide\n    Returns the current presentation slide index.\n",end:"\nend()\n    Jumps to the last fragment of the last slide.\n",first:"\nfirst()\n    Jumps to the first slide.\n",firstFragment:"\nfirstFragment()\n    Jumps to the first fragment of the current slide.\n",jump:"\njump( n )\n    Jumps a specified number of slides.\n",jumpTo:"\njumpTo( n )\n    Jumps to a specified slide, where `n` is the nominal slide number.\n",last:"\nlast()\n    Jumps to the last slide.\n",lastFragment:"\nlastFragment()\n    Jumps to the last fragment of the current slide.\n",loadPresentation:"\nloadPresentation( file )\n    Loads a presentation from a file.\n",next:"\nnext()\n    Moves the presentation to the next slide or slide fragment.\n",nextSlide:"\nnextSlide()\n    Moves the presentation to the next slide.\n",numSlides:"\nnumSlides\n    Returns the presentation length.\n",pres:"\npres()\n    Prints presentation help text and shortcuts.\n",prev:"\nprev()\n    Moves the presentation to the previous slide or slide fragment.\n",prevSlide:"\nprevSlide()\n    Moves the presentation to the previous slide.\n",redraw:"\nredraw()\n    Redraws the current presentation slide.\n",reloadPresentation:"\nreloadPresentation( file )\n    Reloads a presentation.\n",renderSlide:"\nrenderSlide()\n    Renders the current presentation slide.\n",runSlide:"\nrunSlide()\n    Runs slide code.\n",unwatch:"\nunwatch( [error] )\n    Stops watching a presentation file for changes.\n",watch:"\nwatch()\n    Watches a presentation source file for changes.\n"},example:{blank:"blank();\n",currentSlide:"currentSlide\n",end:"end();\n",first:"first();\n",firstFragment:"firstFragment();\n",jump:"jump( 2 );\njump( -2 );\n",jumpTo:"jumpTo( 2 );\n",last:"last();\n",lastFragment:"lastFragment();\n",loadPresentation:"loadPresentation( './path/to/presentation.txt' );\n",next:"next();\n",nextSlide:"nextSlide();\n",numSlides:"numSlides\n",pres:"pres();\n",prev:"prev();\n",prevSlide:"prevSlide();\n",redraw:"redraw();\n",reloadPresentation:"reloadPresentation();\n",renderSlide:"renderSlide()\n",runSlide:"runSlide()\n",unwatch:"unwatch();\n",watch:"watch();\n"}},fa=m.resolve,ha=v.watch,da=A.EventEmitter,ma=Dt,va=Qt.isPrimitive,ga=kn.isPrimitive,wa=ke,_a=Bn,ba=Vn,ya=Yn,Ea=Qn,xa=ir.sync,Sa=vr,ja=Nt,Ta=_r,Pa=Pr,La=Or,Aa=Rr,Oa=pi,Ra=Eo,Ca=Ho,ka=Qo,Na=es,Ma=ta,Ba=ca,Fa=pa,Ja=ve("repl:presentation");function Va(){var e,t,n,r,i,o,s,a,u,l,c;if(e=arguments.length,!(this instanceof Va)){if(0===e)throw new Error("invalid invocation. Insufficient arguments. Must provide a REPL instance.");return 1===e?new Va(arguments[0]):2===e?new Va(arguments[0],arguments[1]):new Va(arguments[0],arguments[1],arguments[2])}if(0===e)throw new Error("invalid invocation. Insufficient arguments. Must provide a REPL instance.");if(i=Aa(),1===e)n=arguments[0];else if(2===e){if(va(arguments[0]))t=arguments[0],n=arguments[1];else if(n=arguments[0],s=Oa(i,arguments[1]))throw s}else{if(!va(t=arguments[0]))throw new TypeError("invalid argument. Presentation text argument must be a string. Value: `"+t+"`.");if(n=arguments[1],s=Oa(i,arguments[2]))throw s}if("REPL"!==ja(n))throw new TypeError("invalid argument. REPL argument must be a REPL instance. Value: `"+n+"`.");for(o=this,Ja("Options: %s",JSON.stringify(i)),da.call(this),wa(this,"_repl",n),wa(this,"_opts",i),ba(this,"_source",""),ba(this,"_watcher",null),wa(this,"_slides",[]),ba(this,"_slide",null),ba(this,"_slideCursor",-1),ba(this,"_fragmentCursor",0),u=n._quiet,n._quiet=!0,n._context.workspace(i.workspace),n._quiet=u,r=Ma(this),Ba(n._context,r),c=0;c<r.length;c++)a=r[c],(l=Fa.help[a[0]])&&(n._context.userDoc(a[0],a[2],l),n._context.userDoc(a[1],a[2],l));return t?(Ra(this._slides,t),this._slide=this._slides[0]||null,this._slideCursor=0,this._fragmentCursor=0):i.load&&this.load(i.load),n.on("exit",p),this;function p(){Ja("REPL environment closed. Performing presentation clean-up tasks."),o.unwatch()}}return Pa(Va,da),wa(Va.prototype,"_select",(function(e,t){var n,r,i;return i=this.length,-1===(n=this._opts.loop?Ea(e,0,i):ya(e,-1,i))||n===i?(Ja("Unable to select slide. Slide cursor out-of-range."),this._slide=null):this._slide=this._slides[n],this._slide&&arguments.length>1?(i=this._slide.fragments.length,-1!==(r=ya(t,-1,i))&&r!==i||(Ja("Unable to select slide fragment. Fragment cursor out-of-range."),this._slide=null)):r=0,this._slide&&(Ja("Selected slide %d and fragment %d.",n,r),this._slideCursor=n,this._fragmentCursor=r),this._slide})),_a(Va.prototype,"currentSlide",(function(){return this._slideCursor+1})),wa(Va.prototype,"end",(function(){var e=this._slides[this.length-1];return e&&(Ja("Jumping to the last fragment of the last slide."),this._select(this.length-1,e.fragments.length-1)),this})),wa(Va.prototype,"first",(function(){return Ja("Jumping to the first slide."),this._select(0),this})),wa(Va.prototype,"firstFragment",(function(){return Ja("Jumping to the first fragment of the current slide."),this._select(this._slideCursor,0),this})),_a(Va.prototype,"height",(function(){return this._opts.height?this._opts.height:this._repl._ostream.isTTY?this._repl._ostream.rows:25})),wa(Va.prototype,"jump",(function(e){if(!ga(e))throw new TypeError("invalid argument. Must provide an integer. Value: `"+e+"`.");return e=ya(this.currentSlide+e,1,this.length)-1,Ja("Jumping to slide %d.",e),this._select(e),this})),wa(Va.prototype,"jumpTo",(function(e){if(!ga(e))throw new TypeError("invalid argument. Must provide an integer. Value: `"+e+"`.");return Ja("Jumping to slide %d.",e-1),this._select(e-1),this})),wa(Va.prototype,"last",(function(){return Ja("Jumping to the last slide."),this._select(this.length-1),this})),wa(Va.prototype,"lastFragment",(function(){return Ja("Jumping to the last fragment of the current slide."),this._slide&&this._select(this._slideCursor,this._slide.fragments.length-1),this})),_a(Va.prototype,"length",(function(){return this._slides.length})),wa(Va.prototype,"load",(function(e){var t,n;if(!va(e))throw new TypeError("invalid argument. Must provide a string. Value: `"+e+"`.");if(this._watcher&&(n=!0,this.unwatch()),Ja("Attempting to load source presentation file: %s",e),t=fa(Ta(),e),Ja("Resolved file path: %s",t),(e=xa(t,{encoding:"utf8"}))instanceof Error)throw e;return Ja("Successfully loaded source presentation file."),this._source=t,this._slides.length=0,Ra(this._slides,e),this._slide=this._slides[0]||null,this._slideCursor=0,this._fragmentCursor=0,n&&this.watch(),this})),wa(Va.prototype,"next",(function(){return null===this._select(this._slideCursor,this._fragmentCursor+1)?(Ja("Moving to the next slide."),this._select(this.currentSlide)):Ja("Moving to the next slide fragment."),this})),wa(Va.prototype,"nextSlide",(function(){return Ja("Moving to the next slide."),this._select(this.currentSlide),this})),wa(Va.prototype,"prev",(function(){var e,t=this._select(this._slideCursor,this._fragmentCursor-1);return null===t?(e=(t=this._slideCursor-1)>=0?this._slides[t].fragments.length-1:0,Ja("Moving to the last fragment of the previous slide."),this._select(t,e)):Ja("Moving to the previous slide fragment."),this})),wa(Va.prototype,"prevSlide",(function(){return Ja("Moving to the previous slide."),this._select(this._slideCursor-1),this})),wa(Va.prototype,"reload",(function(){var e=this.currentSlide;if(""===this._source)throw new Error("invalid operation. No presentation to reload. Use the `load()` method to load a presentation.");Ja("Attempting to reload presentation.");try{this.load(this._source)}catch(e){throw new Error("unexpected error. Unable to reload presentation. Error: "+e.message)}return this.jumpTo(e),Ja("Successfully reloaded presentation."),this})),wa(Va.prototype,"render",(function(){var e,t,n,r,i,o,s,a,u,l,c,p,f,h,d,m;if(null===this._slide)return null;for(d=this.width,o=this.slideHeight,s=this.slideWidth,a=this._slide.length,h=ya(this._fragmentCursor,0,this._slide.fragments.length-1),u=(p=this._slide.fragments[h]).length,t=this._opts.borderRight,n=this._opts.borderLeft,i=this._opts.newline,c=this._opts.whitespace,e=o-u-(r=(o-a)/2|0),this._opts.counter&&(e-=1),l=Ca(s,p,c,s-this._slide.maxLength),f=Sa(this._opts.borderTop,d),f+=i,m=0;m<r;m++)f+=Na(s,c,n,t),f+=i;for(m=0;m<l.length;m++)f+=n,f+=l[m].text,f+=t,f+=i;for(m=0;m<e;m++)f+=Na(s,c,n,t),f+=i;return this._opts.counter&&(f+=n,f+=ka(s,c,this._opts.counter,this._slideCursor+1,this.length),f+=t,f+=i),f+=Sa(this._opts.borderBottom,d)})),wa(Va.prototype,"run",(function(e){var t,n,r,i,o,s,a;if(!ma(e))throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");if(t=this,o=this._slides[this._slideCursor]){if(o.code){for(n=[],s=0;s<o.code.length;s++)if("javascript"===o.code[s].lang)for(i=o.code[s].src,a=0;a<i.length;a++)n.push(i[a]);if(n.length)return Ja("Forwarding each line of slide code to the REPL readline interface in order to mimic user input."),r=n.length,s=-1,function i(){(s+=1)<r?n[s]?(Ja("Forwarding line %d.",s),t._repl._rli.write(n[s]+"\n"),t._repl.once("drain",i)):(Ja("Skipping blank code line."),La(i)):(Ja("Finished executing slide code."),La(e))}()}Ja("Slide does not contain code to run. Skipping.")}else Ja("No slide is currently selected. Skipping.");La(e)})),wa(Va.prototype,"show",(function(){var e=this.render();return e&&(e="[2K[1G"+e+this._opts.newline,this._opts.autoClear?(Ja("Clearing the REPL screen."),this._repl.clear()):e+=this._opts.newline+this._opts.newline+"[2A",Ja("Writing a presentation slide to the REPL."),this._repl._ostream.write(e),this._repl._displayPrompt(!1)),this})),_a(Va.prototype,"slideHeight",(function(){return this.height-5})),_a(Va.prototype,"slideWidth",(function(){return this.width-this._opts.borderLeft.length-this._opts.borderRight.length})),wa(Va.prototype,"unwatch",(function(e){return this._watcher&&(Ja("No longer watching a source presentation file for changes."),this._watcher.close(),this._watcher=null,e&&this.emit("unwatch",e)),this})),wa(Va.prototype,"watch",(function(){var e,t,n;if(""===this._source)throw new Error("invalid operation. No presentation file to watch. Use the `load()` method to load a presentation.");if(this._watcher)return Ja("Already watching a source presentation file for changes."),this;t=this,e={persistent:!1,encoding:"utf8"},Ja("Attempting to watch source presentation file for changes: %s",this._source);try{n=ha(this._source,e,(function(e){var n;if("rename"===e)return void(t._watcher&&(Ja('Encountered a "rename" event for the source presentation file.'),n=new Error('unexpected error. Encountered a "rename" event for the source presentation file. No longer watching source presentation file for changes.'),t.unwatch(n)));Ja("Detected a change to the source presentation file."),t.reload(),t.emit("change")}))}catch(e){throw new Error("unexpected error. Unable to watch presentation source file. Error: "+e.message)}return n.on("error",(function(e){Ja("Encountered an error while watching a source presentation file. Error: %s",e.message),t.unwatch(e)})),Ja("Watching source presentation file."),this._watcher=n,this.emit("watch"),this})),_a(Va.prototype,"width",(function(){return this._opts.width?this._opts.width:this._repl._ostream.isTTY?this._repl._ostream.columns:80})),Va}));
//# sourceMappingURL=bundle.js.map
